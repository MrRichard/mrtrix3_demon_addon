Bootstrap: docker
From: mrtrix3/mrtrix3:latest

%files
    requirements.txt /app/requirements.txt
    dwi_pipeline /app/dwi_pipeline

%post
    set -e # Exit on any error
    echo "INFO: Installing system dependencies..."
    apt-get update
    apt-get install -y --no-install-recommends python3 python3-pip
    rm -rf /var/lib/apt/lists/*
    echo "INFO: Installing Python dependencies..."
    pip3 install --no-cache-dir -r /app/requirements.txt

%runscript
    exec python3 -m dwi_pipeline "$@"